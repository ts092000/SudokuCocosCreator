{"version":3,"sources":["file:///C:/Users/ADMIN/OneDrive/M%C3%A1y%20t%C3%ADnh/SudokuMain2/SudokuMain2/assets/Script/MenuController.ts"],"names":["_decorator","Component","Node","Button","director","find","MenuModel","MenuView","StoredPersistNode","ccclass","property","MenuController","type","volumeSudokuArray","gameClient","start","parameters","gameClientParams","addComponent","volumeAudio","View","AudioBg","volume","addPersistRootNode","console","log","play","AudioMute","node","active","AudioUnmute","volumeValue","localStorage","getItem","setItem","JSON","stringify","parse","length","push","onLoad","PlayGameBtn","on","EventType","CLICK","playGameBtn","update","deltaTime","btnMute","btnUnmute","loadScene"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node ,Button, director, find, AudioSource} from 'cc';\nimport { MenuModel } from './MenuModel';\nimport { MenuView } from './MenuView';\nimport { StoredPersistNode } from './StoredPersistNode';\nconst { ccclass, property } = _decorator;\n\n@ccclass('MenuController')\nexport class MenuController extends Component {\n    @property({type:MenuModel})\n    Model: MenuModel\n\n    @property({type:MenuView})\n    View: MenuView\n\n    private volumeSudokuArray: number[] = [];\n    public gameClient;\n\n    public async start() : Promise<void>{\n        let parameters = find(\"GameClient\");\n        \n        if (parameters === null) {\n            let parameters = new Node(\"GameClient\");\n            let gameClientParams = parameters.addComponent(StoredPersistNode);\n            gameClientParams.gameClient = this.gameClient;\n            gameClientParams.volumeAudio = this.View.AudioBg.volume;\n            director.addPersistRootNode(parameters);\n            console.log(gameClientParams.volumeAudio);\n        }\n\n        // console.log(audioParam);\n        this.View.AudioBg.play();\n        this.View.AudioMute.node.active = false;\n        this.View.AudioUnmute.node.active = true;\n\n        let volumeValue = localStorage.getItem('volumeSudokuArray');\n        localStorage.setItem('volumeSudokuArray', JSON.stringify(this.volumeSudokuArray));\n        \n        if (volumeValue) {\n            this.volumeSudokuArray = JSON.parse(volumeValue);\n            localStorage.setItem('volumeSudokuArray', JSON.stringify(this.volumeSudokuArray));\n        }\n        if (this.volumeSudokuArray.length == 0) {\n            this.View.AudioBg.volume = 0.7;\n            this.volumeSudokuArray.push(this.View.AudioBg.volume);\n        }\n        else {\n            this.View.AudioBg.volume = this.volumeSudokuArray[this.volumeSudokuArray.length - 1];\n        }\n\n        if (this.View.AudioBg.volume == 0.7) {\n            this.View.AudioMute.node.active = false;\n            this.View.AudioUnmute.node.active = true;\n        }\n        \n        if (this.View.AudioBg.volume == 0) {\n            this.View.AudioMute.node.active = true;\n            this.View.AudioUnmute.node.active = false;\n        }\n    }\n\n    public onLoad() {\n        this.View.PlayGameBtn.node.on(Button.EventType.CLICK, this.playGameBtn, this);\n    }\n\n    public update(deltaTime: number) {\n        this.View.AudioMute.node.on(Button.EventType.CLICK, this.btnMute, this);\n        this.View.AudioUnmute.node.on(Button.EventType.CLICK, this.btnUnmute, this);\n    }\n\n    private playGameBtn(PlayGameBtn: Button) {\n        director.loadScene(\"MainGame\");\n    }\n\n    private btnMute(AudioMute: Button) {\n        this.View.AudioMute.node.active = false;\n        this.View.AudioUnmute.node.active = true;\n        this.View.AudioBg.volume = 0.7;\n        this.volumeSudokuArray.push(this.View.AudioBg.volume);\n        localStorage.setItem('volumeSudokuArray', JSON.stringify(this.volumeSudokuArray));\n    }\n\n    private btnUnmute(AudioMute: Button) {\n        this.View.AudioMute.node.active = true;\n        this.View.AudioUnmute.node.active = false;\n        this.View.AudioBg.volume = 0;\n        this.volumeSudokuArray.push(this.View.AudioBg.volume);\n        localStorage.setItem('volumeSudokuArray', JSON.stringify(this.volumeSudokuArray));\n    }\n}\n\n"]}